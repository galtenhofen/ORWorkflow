<div class='panel panel-primary'>
    <div class='panel-heading'>
        <div class='row'>
            <div class='col-xs-3'>Date File Received From:</div>
            <div class='col-xs-2'>
                <input type="date" [(ngModel)]="beginDate" class="form-control" (change)="onChangeDateReceivedFrom($event.target.value)">
            </div>
            <div class='col-xs-3'>Date File Received To:</div>
            <div class='col-xs-2'>
                 <input type="date" [(ngModel)]="endDate" class="form-control" (change)="onChangeDateReceivedTo($event.target.value)">
            </div>
            <div class='col-xs-2'>
                <button class='btn btn-success' (click)='onClickrefreshORList()'>
                                Refresh
                            </button>
                </div>
       </div>
    </div>
   <!-- Filter the Products   -->
    <div class='panel-body'>
        <div class='row'>
            <div class='col-xs-3'>Filter by:</div>
         </div>   
         <div class='row'>
            <div class='col-xs-3'>
                <input type='text' [(ngModel)]='providerFilter' placeholder="ProviderID"/>
            </div>
            <div class='col-xs-3'>
                <input type='text' [(ngModel)]='fileTypeFilter' placeholder="File Type"/>
            </div>
            <div class='col-xs-3'>
                <input type='text' [(ngModel)]='subsystemFilter' placeholder="Subsystem Detail Type"/>
            </div>
            <div class='col-xs-3'>
                <input type='text' [(ngModel)]='statusFilter' placeholder="Status"/>
            </div>
        </div>
   <div class='row' >
            <div class='col-md-3' *ngIf='providerFilter'>
                <h3>Filtered by ProviderId: {{providerFilter}} </h3>
            </div>
			<div class='col-md-3' *ngIf='fileTypeFilter'>
                <h3>Filtered by FileType: {{fileTypeFilter}} </h3>
            </div>
			     <div class='col-md-3' *ngIf='subsystemFilter'>
                <h3>Filtered by Subsystem Type: {{subsystemFilter}} </h3>
            </div>
			 <div class='col-md-3' *ngIf='statusFilter'>
                <h3>Filtered by Status: {{statusFilter}} </h3>
            </div>
</div>

<div class='table-responsive'>
            <table class='table table-striped table-bordered' *ngIf = 'orfiles && orfiles.length'>
                <thead>
                    <tr>
                        <th>PDU Job<br>Number</th>
                        <th>Date File<br>Received</th>
                        <th>Data File<br> Name</th>
                        <th>ORDataFileGroupId</th>
                        <th>ProviderID<br></th>
                        <th>Client<br>Name</th>
                        <th>Begin Date<br>Range</th>
                        <th>End Date<br>Range</th>
                        <th>Publish<br>Date</th>
                        <th>Concatenated<br>File Type</th>
                        <th>Row Count<br>Expected</th>
                        <th>Row Count<br>Converted</th>
                        <th>Step</th>
                        <th>Status</th>
                        <th>Error<br>Message</th>
                        <th>Retry</th>
                        <th>Retry<br>Count</th>
                        <th>Data<br>Utility</th>
                    </tr>
                </thead>
                <tbody >
                <tr *ngFor='#orfile of orfiles | orfileFilter:providerFilter:fileTypeFilter:subsystemFilter:statusFilter' >
                    <td>{{orfile.pduJobNumber}}</td>
                    <td>{{orfile.dateFileReceived}}</td>
                    <td class="text-nowrap">{{orfile.rawFilename}}</td>
                    <td>{{orfile.orDataFileGroupID}}</td>
                    <td>{{orfile.providerID}}</td>
                    <td class="text-nowrap">{{orfile.clientName}}</td>
                    <td>{{orfile.beginDateRange}}</td>
                    <td>{{orfile.endDateRange}}</td>
                    <td>{{orfile.publishCompleteDate}}</td>
                    <td class="text-nowrap">{{orfile.fileType}} - {{orfile.fileType_SubsystemDetailType}}</td>
                    <td>{{orfile.rowCountExpected}}</td>
                    <td>{{orfile.rowCountConverted}}</td>
                    <td>{{orfile.processStep}}</td>
                    <td>{{orfile.processStatus}}</td>
                    <td>{{orfile.errorMessage}}</td>
                    <td *ngIf="orfile.processStatus=='Failed'"><input #retryCheckbox type="checkbox" id="retryCheckbox" value="option1" (change)="onToggleRetry(orfile.orDataFileGroupID,retryCheckbox.checked,orfile.processStep)" aria-label="..."></td>
                    <td *ngIf="orfile.processStatus!='Failed'"><div></div></td>   
                    <td>{{orfile.retryCount}}</td>
                    <td *ngIf="!orfile.publishCompleteDate"><orw-utility-list (utilitySelected)='onUtilitySelected($event)'></orw-utility-list></td>
                 </tr>   
                </tbody>
               </table>
            </div>  


                <div align="right">
                <button class='btn btn-primary' (click)='onClickReleaseRetry()'> Release Checked Retry Items</button>
                <button class='btn btn-primary' (click)='onClickRunDataUtilities()' > Run Selected Data Utilities </button>
                <button class='btn btn-danger' (click)='onClickClose()' > Close </button>   
                </div>
        </div>
  
</div>


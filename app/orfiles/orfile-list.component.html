<div class='panel panel-primary'>
    <div class='panel-heading'>
        <div class='row'>
            <div class='col-xs-3'>Date File Received From:</div>
            <div class='col-xs-2'>
                <input type="date" [(ngModel)]="beginDate" class="form-control" (change)="onChangeDateReceivedFrom($event.target.value)">
            </div>
            <div class='col-xs-3'>Date File Received To:</div>
            <div class='col-xs-2'>
                 <input type="date" [(ngModel)]="endDate" class="form-control" (change)="onChangeDateReceivedTo($event.target.value)">
            </div>
            <div class='col-xs-2'>
                <button class='btn btn-success' (click)='onClickrefreshORList()'>
                                Refresh
                            </button>
                </div>
       </div>
    </div>
   <!-- Filter the Products   -->
    <div class='panel-body'>
        <div class='row'>
            <div class='col-xs-3'>Filter by:</div>
         </div>   
         <div class='row'>
            <div class='col-xs-3'>
                <input type='text' [(ngModel)]='providerFilter' placeholder="ProviderID"/>
            </div>
            <div class='col-xs-3'>
                <input type='text' [(ngModel)]='fileTypeFilter' placeholder="File Type"/>
            </div>
            <div class='col-xs-3'>
                <input type='text' [(ngModel)]='subsystemFilter' placeholder="Subsystem Detail Type"/>
            </div>
            <div class='col-xs-3'>
                <select name ="status" form = "statusForm" [(ngModel)]='statusFilter' placeholder="Status" default = "Status">
                    <option value="">All</option>
                    <option value="In Progress">Failed</option>
                    <option value="Case Complete">Open Cases</option>
                    <option value="Waiting">Case Complete</option>
                    <option value="Failed">Purged</option>
                </select>
                <!-- <input type='select' [(ngModel)]='statusFilter' placeholder="Status"/> -->
            </div>
        </div>
        <div style="height:30px" *ngIf='!providerFilter && !fileTypeFilter && !subsystemFilter && !statusFilter'>
            </div>
   <div class='row' >
            <div class='col-md-3' *ngIf='providerFilter'>
                <h3>Filtered by ProviderId: {{providerFilter}} </h3>
            </div>
			<div class='col-md-3' *ngIf='fileTypeFilter'>
                <h3>Filtered by FileType: {{fileTypeFilter}} </h3>
            </div>
			     <div class='col-md-3' *ngIf='subsystemFilter'>
                <h3>Filtered by Subsystem Type: {{subsystemFilter}} </h3>
            </div>
			 <div class='col-md-3' *ngIf='statusFilter'>
                <h3>Filtered by Status: {{statusFilter}} </h3>
            </div>
</div>
<div >
<div class='table-responsive' > 
         <!--   <table class='table table-striped table-bordered' *ngIf = 'orfiles && orfiles.length'> 
             This line decides whether or not headers are visible if there is no data returned
             -->
             <table resizeable mode="resizeMode" class='table table-striped table-bordered table-condensed' >
                <thead>
                    <tr>
                        <th>PDU Job<br>Number</th>
                        <th>Date File<br>Received</th>
                        <th style='width:100px'>Data File<br> Name</th>
                        <th>ORDataFile<br>GroupId</th>
                        <th>ProviderID<br></th>
                        <th style='width:100px'>Client<br>Name</th>
                        <th>Begin Date<br>Range</th>
                        <th>End Date<br>Range</th>
                        <th>Publish<br>Date</th>
                        <th style='width:100px'>Concatenated<br>File Type</th>
                        <th>Row Count<br>Expected</th>
                        <th>Row Count<br>Converted</th>
                        <th>Step</th>
                        <th>Status</th>
                        <th style='width:100px'>Error<br>Message</th>
                        <th>Retry</th>
                        <th>Retry<br>Count</th>
                        <th>Data<br>Utility</th>
                    </tr>
                </thead>
               
                <tbody >
                <tr *ngFor='#orfile of orfiles | orfileFilter:providerFilter:fileTypeFilter:subsystemFilter:statusFilter' >
                    <td>{{orfile.pduJobNumber}}</td>
                    <td>{{orfile.dateFileReceived}}</td>
                    <td style='width:100px'>{{orfile.rawFilename}}</td>
                    <td>{{orfile.orDataFileGroupID}}</td>
                    <td>{{orfile.providerID}}</td>
                    <td style='width:100px'>{{orfile.clientName}}</td>
                    <td>{{orfile.beginDateRange}}</td>
                    <td>{{orfile.endDateRange}}</td>
                    <td>{{orfile.publishCompleteDate}}</td>
                    <td style='width:100px'>{{orfile.fileType}} - {{orfile.fileType_SubsystemDetailType}}</td>
                    <td>{{orfile.rowCountExpected}}</td>
                    <td>{{orfile.rowCountConverted}}</td>
                    <td>{{orfile.processStep}}</td>
                    <td>{{orfile.processStatus}}</td>
                    <td style='width:100px'>{{orfile.errorMessage}}</td>
                    <td *ngIf="orfile.processStatus=='Failed'"><input #retryCheckbox type="checkbox" id="retryCheckbox" value="option1" (change)="onToggleRetry(orfile.orDataFileGroupID,retryCheckbox.checked,orfile.processStep)" aria-label="..."></td>
                    <td *ngIf="orfile.processStatus!='Failed'"><div></div></td>   
                    <td>{{orfile.retryCount}}</td>
                    <td *ngIf="!orfile.publishCompleteDate"><orw-utility-list (utilitySelected)='onUtilitySelected($event, orfile.orDataFileGroupID, orfile.providerID)'></orw-utility-list></td>
                 </tr>   
                </tbody>
               </table>
                <div class= 'panel-heading' *ngIf='!orfiles || orfiles.length < 1'>
                      There is no data for the chosen dates
                   </div>  
           </div> <!-- this is the table-responsive wrapper-->  
</div> 

                <div align="right">
                <button class='btn btn-primary' (click)='onClickReleaseRetry()'> Release Checked Retry Items</button>
                <button class='btn btn-primary' (click)='onClickRunDataUtilities()' > Run Selected Data Utilities </button>
                <button class='btn btn-danger' (click)='onClickClose()' > Close </button>   
                </div>
        </div>
  
</div>

